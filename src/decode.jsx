import abi from "./abi.json"
import { ethers, Contract, AbiCoder } from "ethers"
import env from './validateEnv'
import toast from "react-hot-toast"

export async function decode() {
    console.log("Unlocked")

    // const provider = new ethers.providers.JsonRpcProvider(`https://mainnet.infura.io/v3/${env.REACT_APP_INFURA_API_KEY}`);
    const bytecode = `0x608060405234801561000f575f80fd5b5060043610610034575f3560e01c8063cf30901214610038578063ec9b5b3a14610056575b5f80fd5b610040610072565b60405161004d91906100f8565b60405180910390f35b610070600480360381019061006b9190610148565b610082565b005b5f8054906101000a900460ff1681565b80600154036100db575f805f6101000a81548160ff0219169083151502179055507f745c90b656b4aafe296c8ca35aeacfe56cb96c90e1d320e5da643fff1051b6c0336040516100d291906101b2565b60405180910390a15b50565b5f8115159050919050565b6100f2816100de565b82525050565b5f60208201905061010b5f8301846100e9565b92915050565b5f80fd5b5f819050919050565b61012781610115565b8114610131575f80fd5b50565b5f813590506101428161011e565b92915050565b5f6020828403121561015d5761015c610111565b5b5f61016a84828501610134565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61019c82610173565b9050919050565b6101ac81610192565b82525050565b5f6020820190506101c55f8301846101a3565b9291505056fea264697066735822122016cc35327af1fcac76baa724fbcfd8c136ca675fa398ab043c50c419009456fb64736f6c63430008140033`

    const contractAddress = `0x89d5b48f3974A05b4BF816aebA12D401c0ebb003`


    const inputData = `0x608060405234801561000f575f80fd5b507ff40fcec21964ffb566044d083b4073f29f7f7929110ea19e1b3ebe375d89055e7f150b3e54396bc87264c06f2f742853b2d277990e4d28e7a1f07fdaf01aedebaf60405161005e9061009c565b61006891906100f6565b604051809103905ff080158015610081573d5f803e3d5ffd5b5060405161008f919061014e565b60405180910390a1610167565b6102c7806101b183390190565b5f819050919050565b5f819050919050565b5f815f1b9050919050565b5f6100e06100db6100d6846100a9565b6100bb565b6100b2565b9050919050565b6100f0816100c6565b82525050565b5f6020820190506101095f8301846100e7565b92915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6101388261010f565b9050919050565b6101488161012e565b82525050565b5f6020820190506101615f83018461013f565b92915050565b603e806101735f395ff3fe60806040525f80fdfea2646970667358221220ed8db719d225d93680118351f3b316f4e474a03925627ad8cd25029ac64dce1964736f6c63430008140033608060405234801561000f575f80fd5b506040516102c73803806102c78339818101604052810190610031919061008e565b60015f806101000a81548160ff02191690831515021790555080600181905550506100b9565b5f80fd5b5f819050919050565b61006d8161005b565b8114610077575f80fd5b50565b5f8151905061008881610064565b92915050565b5f602082840312156100a3576100a2610057565b5b5f6100b08482850161007a565b91505092915050565b610201806100c65f395ff3fe608060405234801561000f575f80fd5b5060043610610034575f3560e01c8063cf30901214610038578063ec9b5b3a14610056575b5f80fd5b610040610072565b60405161004d91906100f8565b60405180910390f35b610070600480360381019061006b9190610148565b610082565b005b5f8054906101000a900460ff1681565b80600154036100db575f805f6101000a81548160ff0219169083151502179055507f745c90b656b4aafe296c8ca35aeacfe56cb96c90e1d320e5da643fff1051b6c0336040516100d291906101b2565b60405180910390a15b50565b5f8115159050919050565b6100f2816100de565b82525050565b5f60208201905061010b5f8301846100e9565b92915050565b5f80fd5b5f819050919050565b61012781610115565b8114610131575f80fd5b50565b5f813590506101428161011e565b92915050565b5f6020828403121561015d5761015c610111565b5b5f61016a84828501610134565b91505092915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f61019c82610173565b9050919050565b6101ac81610192565b82525050565b5f6020820190506101c55f8301846101a3565b9291505056fea264697066735822122016cc35327af1fcac76baa724fbcfd8c136ca675fa398ab043c50c419009456fb64736f6c63430008140033`


    const data = ethers.utils.defaultAbiCoder.decode(
        ['bytes32'],
        ethers.utils.hexDataSlice(inputData, 4)
    )
    console.log(data)

    // const data = '0x7ff36ab50000000000000000000000000000000000000000000000bc18ba4144048bbab00000000000000000000000000000000000000000000000000000000000000080000000000000000000000000c0c5eb43e2df059e3be6e4fb0284c283caa5991900000000000000000000000000000000000000000000000000000000614d87a80000000000000000000000000000000000000000000000000000000000000002000000000000000000000000bb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c00000000000000000000000008ba0619b1e7a582e0bce5bbe9843322c954c340';

    // console.log(ethers.utils.defaultAbiCoder.decode(
    //     ['uint256', 'address[]', 'address', 'uint256'],
    //     ethers.utils.hexDataSlice(data, 4)
    // ))
}